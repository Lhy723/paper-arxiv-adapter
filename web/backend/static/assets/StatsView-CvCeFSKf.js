import{p as f}from"./api-D9h__T2_.js";import{d as h,s as b,e,f as s,F as p,x as m,t as n,r as k,n as u,j as i,o,z as w,_ as x}from"./index-DKN7MZcg.js";const z={class:"stats-view"},B={key:0,class:"loading-state"},C={class:"stats-grid"},M={class:"stat-card primary"},S={class:"stat-content"},V={class:"stat-value"},j={class:"stat-card cta"},A={class:"stat-content"},F={class:"stat-value"},O={class:"stat-card success"},L={class:"stat-content"},N={class:"stat-value"},D={class:"section-card"},E={key:0,class:"empty-state"},H={key:1,class:"category-list"},I={class:"category-info"},W={class:"category-name"},q={class:"category-count"},G={class:"category-bar"},J=h({__name:"StatsView",setup(K){const l=u({total_papers:0,db_size_bytes:0,db_size_mb:0,categories:{}}),r=u(!0),d=i(()=>Object.keys(l.value.categories).length),_=i(()=>Object.entries(l.value.categories).sort((a,t)=>t[1]-a[1])),g=i(()=>Math.max(...Object.values(l.value.categories),1));function y(a){return a/g.value*100}return b(async()=>{try{const{data:a}=await f.getStats();l.value=a}catch(a){console.error("Failed to load stats:",a)}finally{r.value=!1}}),(a,t)=>(o(),e("div",z,[t[9]||(t[9]=s("div",{class:"page-header"},[s("h1",null,"数据统计"),s("p",{class:"page-desc"},"查看数据库中的论文统计信息")],-1)),r.value?(o(),e("div",B,[...t[0]||(t[0]=[s("div",{class:"spinner"},null,-1),s("span",null,"加载统计数据...",-1)])])):(o(),e(p,{key:1},[s("div",C,[s("div",M,[t[2]||(t[2]=m('<div class="stat-icon" data-v-a9afc6eb><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-a9afc6eb><path d="M12 2L2 7l10 5 10-5-10-5z" data-v-a9afc6eb></path><path d="M2 17l10 5 10-5" data-v-a9afc6eb></path><path d="M2 12l10 5 10-5" data-v-a9afc6eb></path></svg></div>',1)),s("div",S,[s("span",V,n(l.value.total_papers),1),t[1]||(t[1]=s("span",{class:"stat-label"},"论文总数",-1))])]),s("div",j,[t[4]||(t[4]=s("div",{class:"stat-icon"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})])],-1)),s("div",A,[s("span",F,n(l.value.db_size_mb)+" MB",1),t[3]||(t[3]=s("span",{class:"stat-label"},"存储空间",-1))])]),s("div",O,[t[6]||(t[6]=s("div",{class:"stat-icon"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})])],-1)),s("div",L,[s("span",N,n(d.value),1),t[5]||(t[5]=s("span",{class:"stat-label"},"分类数量",-1))])])]),s("div",D,[t[8]||(t[8]=s("h2",null,"分类分布",-1)),d.value===0?(o(),e("div",E,[...t[7]||(t[7]=[s("p",null,"暂无分类数据",-1)])])):(o(),e("div",H,[(o(!0),e(p,null,k(_.value,([c,v])=>(o(),e("div",{key:c,class:"category-item"},[s("div",I,[s("span",W,n(c),1),s("span",q,n(v)+" 篇",1)]),s("div",G,[s("div",{class:"category-bar-fill",style:w({width:y(v)+"%"})},null,4)])]))),128))]))])],64))]))}}),R=x(J,[["__scopeId","data-v-a9afc6eb"]]);export{R as default};
